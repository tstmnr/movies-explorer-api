# movies-explorer-api
API для аутентификации пользователей и добавления фильмов в "Избранное". Создан для сервиса поиска фильмов Movie Explorer, в котором можно найти фильмы по ключевым словам.

Адрес домена сервера: https://api.tstmnr.diploma.nomoredomains.rocks

IP-адрес 51.250.17.79

## Схемы и модели ресурсов API

### Поля схемы `user`:

`email` — почта пользователя, по которой он регистрируется. Это обязательное поле, уникальное для каждого пользователя. Также оно должно валидироваться на соответствие схеме электронной почты.

`password` — хеш пароля. Обязательное поле-строка. Нужно задать поведение по умолчанию, чтобы база данных не возвращала это поле.

`name` — имя пользователя, например: Александр или Мария. Это обязательное поле-строка от 2 до 30 символов.

### Поля схемы `movie`:

`country` — страна создания фильма. Обязательное поле-строка.

`director` — режиссёр фильма. Обязательное поле-строка.

`duration` — длительность фильма. Обязательное поле-число.

`year` — год выпуска фильма. Обязательное поле-строка.

`description` — описание фильма. Обязательное поле-строка.

`image` — ссылка на постер к фильму. Обязательное поле-строка. Запишите её URL-адресом.

`trailerLink` — ссылка на трейлер фильма. Обязательное поле-строка. Запишите её URL-адресом.

`thumbnail` — миниатюрное изображение постера к фильму. Обязательное поле-строка. Запишите её URL-адресом.

`owner` — **_id** пользователя, который сохранил фильм. Обязательное поле.

`movieId` — **id** фильма, который содержится в ответе сервиса **MoviesExplorer**. Обязательное поле в формате number.

`nameRU` — название фильма на русском языке. Обязательное поле-строка.

`nameEN` — название фильма на английском языке. Обязательное поле-строка.

## Методы и роуты

GET `/users/me` - возвращает информацию о пользователе (**email** и **имя**)

PATCH `/users/me` - обновляет информацию о пользователе (**email** и **имя**)

GET `/movies` - возвращает все сохранённые текущим  пользователем фильмы

POST `/movies` - создаёт фильм с переданными в теле ***country***, ***director***, ***duration***, ***year***, ***description***, ***image***, ***trailer***, ***nameRU***, ***nameEN*** и ***thumbnail***, ***movieId*** 

DELETE `/movies/_id` - удаляет сохранённый фильм по **id**

POST `/signup` - создаёт пользователя с переданными в теле **email**, **password** и **name**

POST `/signin` - аутентификация и авторизация пользователя с переданными в теле **email**, **password**

POST `/signout` - выход из аккаунта

## Используемые технологии 

* Node.js
* MongoDB
* Git
* пакеты bcryptjs, body-parser, celebrate, cookie-parser, dotenv, express, express-rate-limit, express-winston, helmet, jsonwebtoken, mongoose, validator, winston
